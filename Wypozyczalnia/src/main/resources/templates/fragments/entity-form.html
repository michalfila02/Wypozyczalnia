<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="entityForm(actionUrl, entity, title)">
    <div class="overlay" th:classappend="${showForm} ? ' show' : ''">
        <div class="panel">
            <h2 th:text="${title}"></h2>

            <form th:action="@{/klienci}" method="post">
                <!-- Hidden field for ID (needed to update existing entity) -->
                <input type="hidden" th:if="${formEntity.id != null}" th:name="id" th:value="${formEntity.id}" />

                <!-- Dynamic allowed fields -->
                <div th:each="entry : ${formFields}">
                    <label th:for="${entry.key}" th:text="${#strings.capitalize(entry.key)}"></label>
                    <input th:name="${entry.key}" th:type="${entry.value}" th:value="${formValues[entry.key]}" class="form-control mb-2"/>
                </div>

                <button type="submit" class="btn btn-success">Save</button>
            </form>
        </div>
    </div>
</div>

<style>
    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .overlay.show {
        display: flex;
    }

    .panel {
        background: white;
        padding: 20px;
        border-radius: 10px;
        min-width: 300px;
        max-width: 600px;
    }
</style>

<script>
    function closeForm() {
        document.querySelector('.overlay').classList.remove('show');
    }
</script>

</body>
</html>